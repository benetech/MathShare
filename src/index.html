<!DOCTYPE html>
<html lang="en-US">
    <head>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-107874733-1"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-107874733-1');
    
        </script>
        <meta charset="utf-8">
        <title>Benetech Math Editor</title>
        <link rel="icon" type="image/png" href="images/favicon.png"/>
        <link rel="stylesheet" href="lib/mathlivedist/mathlive.core.css" type="text/css">
        <link rel="stylesheet" href="lib/mathlivedist/mathlive.css" type="text/css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css"
                integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
        <link rel="stylesheet" href="lib/intro/minified/introjs.min.css" type="text/css">
        <link rel="stylesheet" href="styles/styles.css" type="text/css">
        <link rel="stylesheet" href="lib/font-awesome/css/font-awesome.min.css" type="text/css">
        <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
                crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js"
                integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh"
                crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"
                integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ"
                crossorigin="anonymous"></script>
        <script src="lib/mathlivedist/mathlive.js"></script>
        <script src="data/painterroConfiguration.js"></script>
        <script src="scripts/scripts.js"></script>
        <script src="scripts/paletteBuilder.js"></script>
        <script src="data/example01.js"></script>
        <script src="data/palettes.js"></script>
        <script src="scripts/painterro-0.2.65.min.js"></script>
        <script>
            $(document).ready(function() {
                ReadFileInitiate('data/data01.js');
            })
        </script>
    </head>
<body lang=EN-US>
<div class="mainWrapper">
    <div id="topNavigation" class="header">
        <!-- BEGIN TOP HEADER/NAVIGATION -->
        <header>
            <h2 class="sr-only"> Header </h2>
            <nav class="navbar navbar-expand-lg navbar-default" id="topNavigation">
                <a class="navbar-brand" href="#">
                    <img src="images/logo.png" alt="Benetech Math Editor" height="37">
                </a>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav mr-auto">
                    </ul>
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link pointer" onclick="SetAndOpenEditorModel(this, example01)">Getting Started</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button"
                               aria-haspopup="true"
                               aria-expanded="false">Problem Sets</a>
                            <div class="dropdown-menu" role="list" aria-label="Problem Sets">
                                <a class="dropdown-item" onclick="ReadFileInitiate('data/data01.js');">Problem Set 01</a>
                                <a class="dropdown-item" onclick="ReadFileInitiate('data/data02.js');">Problem Set 02</a>
                                <a class="dropdown-item" onclick="ReadFileInitiate('data/data03.js');">Problem Set 03</a>
                                <a class="dropdown-item" onclick="OpenFileUpload();">Upload</a>
                                <input id='fileid' type='file' hidden/>
                            </div>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="mailto:info@diagramcenter.org">Contact Us</a>
                        </li>
                        <li class="nav-item">
                            <a href="http://www.surveygizmo.com/s3/4048161/Benetech-s-Math-Editor-Online-Feedback"
                               target="_blank"
                               class="nav-link">
                                <i class="fa fa-arrow-circle-right" aria-hidden="true"
                                   style="font-size: 1.2em; padding-top: 3px;"></i>
                                Provide Feedback
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>
        <!-- END TOP HEADER/NAVIGATION -->
    </div>
    <div class="contentWrapper" id="ContentWrapper">
        <nav id="LeftNavigation" class="leftNavigation" aria-labelledby="LeftNavigationHeader">
            <h2 id="LeftNavigationHeader" class="sr-only"> Problems to solve </h2>
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>Select a problem and try out Benetech's Math Editor (alpha)!</h2>
                    <br/><br/>
                </div>
            </div>
            <div id="ProblemList"></div> <!-- place for list of problems -->
        </nav>
        <main id="MainWorkArea" class="editorAndHistoryWrapper">
            <div class="problemHeader">
                <div>
                    <span class="problemTitle" id="ProblemTitle" role="heading" aria-level="1">Problem title</span>
                    <span class="problemTitle" id="ProblemMath">Problem</span>
                </div>
                <div style="white-space: nowrap;">
                    <button aria-hidden='true'
                            onclick="introJs().setOption('tooltipClass', 'introjs-helperLayer').start(); GoogleAnalytics('Tour');"
                            type="button" class="btn btn-default pointer" style="margin-right: 5px;">Help
                    </button>
                </div>
            </div>
            <div style="flex: 0 0 50px; padding: 10px 0px 0px 10px;">
                <h2 id="MySteps" tabindex="-1">
                    <span class="modalAreaHeading myStepsHeader" aria-hidden="true">My Steps</span>
                    <span class="sr-only ">My Steps</span>
                </h2>
            </div>
            <div class="historyWrapper">
                <div class="row" data-step="4"
                     data-intro="Review your work. The trash icon also allows you to delete and rework a prior step.">
                    <div class="col-lg-12">
                        <div class="mathHistory container-fluid" style="color: #001F3F; opacity: 1;" id="MathHistory">
                        </div>
                    </div>
                </div>
            </div>
            <div id="EditorArea">
                <div class="myWorkArea">
                    <div id="historyWorkSeparator">
                        <h2>
                            <span class="modalAreaHeading" style="margin-top: 8px;" aria-hidden="true">My Work</span>
                            </br>
                            <span class="sr-only">My Work</span>
                        </h2>
                    </div>

                    <div class="editorWrapper">
                        <div class="mathWorkArea">
                            <div class="row">
                                <div class="col-lg-12">
                                    <div id="workArea" class="mathEditor d-flex flex-nowrap justify-content-between"
                                        data-step="1"
                                        data-position="top"
                                        data-intro="Type or edit the equation using your keyboard and the math keys below. Try using the cross out, replace, and calc buttons to help show your work.">
                                        <h3 class="sr-only">Math editor</h3>
                                        <div aria-label="edit equation" id='mathEditorActive' role="application" tabindex="0"
                                            class="order-1"
                                            onfocus="TheActiveMathField.focus();"></div>
                                        <div class="order-2">
                                            <h3 id="mathAnnotationHeader" class="mathAnnotation sr-only"
                                                style="border-left: 1px solid #CCC;" tabindex="-1">Describe your
                                                work</h3>
                                            <textarea class="form-control" id="mathAnnotation"
                                                    placeholder="Use the microphone button or type to explain your work (required)"
                                                    data-step="2"
                                                    data-intro="Describe your work by typing directly or using the microphone to record an explanation of your work (required)."></textarea>
                                            <span style="float: right;"><button id="start_button" class="btn btn-mic pointer"
                                                                                data-toggle="tooltip"
                                                                                onclick="GoogleAnalytics('S2T Clicked');"><img
                                                    alt="Start Speaking"
                                                    id="mic_img"
                                                    src="images/mic.gif"></button></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex flex-nowrap justify-content-between pt-2">
                            <div id="mathPalette" class="pl-0 col-lg-10 d-flex flex-nowrap"></div>
                            <div>
                                <button class="btn btn-undo btn-background paletteButton" id="undoDelete" data-toggle="tooltip"
                                        title="Undo Last Delete" onclick="UndoDeleteStep()" style="margin-bottom: 5px;"></button>
                                <br>
                                <h3 class="sr-only">Clean up and add new step</h3>
                                <button id='addStep' class="btn btn-primary pointer editorButton" data-toggle="tooltip"
                                        title="Clean up the cross outs and start a new step (⌨: shift+enter)"
                                        onclick="AddStep();"
                                        data-step="3"
                                        data-intro="Clean-up your work and start a new step."><i
                                        class="fa fa-plus"></i> Add Step
                                </button>
                                <div hidden id="updateControls">     
                                    <button id='updateStep' class="btn btn-success pointer editorButton" data-toggle="tooltip"
                                        title="Update the step (⌨: shift+enter)"
                                        data-step="3"
                                        data-intro="Update the step."><i
                                        class="fa fa-pencil"></i> Update Step
                                    </button>                         
                                    <br/>
                                    <button id='cancelEdit' class="btn btn-default pointer editorButton" data-toggle="tooltip"
                                        title="Cancel edit" onclick="ExitUpdate();"
                                        data-step="3"
                                        data-intro="Cancel edit."><i
                                        class="fa fa-ban" ></i> Cancel edit
                                    </button>                        
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="problemFooter">
                        <div></div>
                        <div class="row">
                            <div class="col-lg-12" style="text-align:right;">
                                <button class="btn btn-default pointer" id="BtnDiscard" onclick="GoogleAnalytics('Discard');">
                                    Discard
                                </button>
                                <button class="btn btn-default pointer" id="BtnSave" data-step="5"
                                        data-intro="Save your work or close out to try again from the beginning."
                                        onclick="GoogleAnalytics('Save');"><i class="fa fa-thumbs-up"></i> Done
                                </button>
                                <button class="btn btn-default pointer" id="BtnClearAll" onclick="clearAllSteps()"><i class="fa fa-times-circle"></i> Clear
                                    all
                                </button>
                            </div>
                        </div>
                        <!-- 		    <button class="btn btn-default pointer float-right" id="BtnSave" data-step="5" data-intro="Save your work or close out to try again from the beginning." onclick="GoogleAnalytics('Save');">Save Problem</button>		  	 -->
                    </div>

                </div>
            </div>
        </main>
    </div>

    <!-- BEGIN FOOTER -->
    <div id="footerPlaceHolder">
    </div>
    <!-- END FOOTER -->

</div>

<script>
    <!-- Initialize JQuery tooltip code -->
    $(document).ready(function(){
        $('[data-toggle="tooltip"]').tooltip();
    });
    <!-- MATHLIVE INITIALIZATION RENDER SCRIPT -->
    initializeMathPalette();
    RenderMathEditor();
    MathLive.renderMathInDocument();
    SetAndOpenEditorModel(this, example01);
    $("#LeftNavigation li:first").focus();
</script>
<script src="scripts/speech2text.js"></script>
<script src="lib/intro/minified/intro.min.js"></script>

</body>
</html>
